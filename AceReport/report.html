<html lang="en">
<head>
  <meta charset="utf-8">
  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.15/css/dataTables.bootstrap4.min.css"/>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">
  <style>
    /* general */
    body {
      margin: 3em;
    }
    .tab-content {
      margin-top: 2em;
    }

    table th {
      width: auto !important;
    }
    code {
      line-height: 1.5;
    }

    .location {
      font-size:.8em;font-family:monospace;overflow-wrap:break-word
    }

    .snippet {
      font-size:.8em;
    }
    .snippet code {
      display: block;
      font-size:1em;
      font-family:monospace;overflow-wrap:break-word;
      margin-top: 1em;
    }

    .tab-pane{
      margin-top: 1.5em;
      margin-left: 1em;
      margin-bottom: 2em; /* useful for javascriptless (tab-less) linear display mode */
    }

    .pagenav {
      font-style: italic;
      font-size: small;
      margin-top: 1em;
    }

    .sectionnav {
      font-style: italic;
      font-size: small;
      margin-top: 1em;
      margin-bottom: 2em;
    }
    /* metadata */
    #metadata-table tr td:first-child {
      font-family: 'Courier New';
      font-weight: bold;
    }
    .metadata-name {
      font-family: 'Courier New';
      font-weight: bold;
    }
    .metadata-name:after {
      content: ", ";
    }
    .metadata-name:last-child::after {
      content: "";
    }
    #a11y-metadata {
      margin-top: 1em;
    }
    #metadata-table_wrapper {
      padding-left: 0 !important;
    }

    /* TOC outline */
    .toc-h1:before,.toc-h2:before,.toc-h3:before,.toc-h4:before,.toc-h5:before,.toc-h6:before,.toc-missing{
      display:inline-block;
      height:1.5em;
      padding:0 .4em;
      background-color:#449d44;
      border-radius:4px;
      color:#fff;
      font-size:.8em;
      font-family:monospace;
      margin:0 .5em 0 0;
    }

    .toc-h1:before{content:'h1'}
    .toc-h2:before{content:'h2'}
    .toc-h3:before{content:'h3'}
    .toc-h4:before{content:'h4'}
    .toc-h5:before{content:'h5'}
    .toc-h6:before{content:'h6'}
    .toc-missing{font-family:inherit;background-color:#c9302c}

    #toc-outline ol, #html-outline ol {
      list-style: disc;
    }

    /* images */
    #images td {
      text-align: center;
      font-family: serif;
    }
    #images td.image{
      /*text-align:center;*/
      padding:.2em;
    }
    #images td.missing{
      /*text-align:center;*/
      color:#888;
      font-style:italic;
    }
    #images td.alt {border:1px solid #ddd}
    #images td.alt.missing{background-color:#f2dede}
    #images td.alt,td.image.presentation+td.alt.missing{background-color:#dff0d8}
    #images img {
      max-height: 300px;
      max-width: 300px;
    }

    /* violations  */
    #violations-summary-stats-table {
      width: 30%;
    }
    #violations ul:not(.pagination) {
      list-style-type: circle;
    }

    #filters select {
      margin-left: 10px;
      margin-right: 30px;
    }

    .filter-label {
      text-transform: capitalize;
    }

    .engine {
      font-style: italic;
    }
    .engine:before{content: '(via '}
    .engine:after{content: ')'}
    .css:before{content: 'CSS: '}
    .cfi:before{content: 'CFI: '}

    /* make the list and KB link the same padding */
    td.details p{
      padding-left: 40px;
    }

    span.critical, span.serious, span.moderate, span.minor {
      display:inline-block;
      height:1.5em;
      padding: .4em;
      border-radius:4px;
      font-family:monospace;
      font-weight: bold;
    }

    span.critical {
      background-color: #9c2b2e;
      color: #fff;
    }
    span.serious {
      background-color: #ffa500;
      color: #000;
    }
    span.moderate {
      background-color: #7b5000;
      color: #fff;
    }
    span.minor {
      background-color: #ffff7f;
      color: #000;
    }
    #message {
      margin-left: 1em;
    }
    #violations-table_wrapper {
      padding-left: 0 !important;
    }

  </style>

  <title>EPUB Accessibility Report by DAISY Ace</title>
</head>
<body>

  <header>
    <noscript>
      <div class="alert alert-info">Please enable javascript for best performance.</div>
    </noscript>

    <h1>EPUB Accessibility Report</h1>
    <p class="font-italic">Generated by DAISY Ace (1.1.1) on 3/16/2020, 3:31:10 PM</p>
    <p><span class="font-weight-bold">Title:</span> Natural History of the Tulare Kangaroo Rat</p>
  </header>

  <nav>
    <ul id="navlist" role="tablist">
      <li class="nav-item"><a class="nav-link active" data-toggle="list" href="#violations" role="tab" aria-controls="violations" id="nav-violations">Violations</a></li>
      <li class="nav-item"><a class="nav-link" data-toggle="list" href="#metadata" role="tab" aria-controls="metadata" id="nav-metadata">Metadata</a></li>
      <li class="nav-item"><a class="nav-link" data-toggle="list" href="#outlines" role="tab" aria-controls="outlines" id="nav-outlines">Outlines</a></li>
      <li class="nav-item"><a class="nav-link" data-toggle="list" href="#images" role="tab" aria-controls="images" id="nav-images">Images</a></li>
    </ul>
  </nav>


  <!-- Tab panes -->
  <div class="tab-content">

    <!-- VIOLATIONS TAB -->
    <div id="violations" role="tabpanel">
      <h2>Violations</h2>
      <p class="sectionnav">Go to: <a href="#summary_of_violations">Summary of violations</a> | <a href="#all-violations">All violations</a> </p>

      <h3 id="summary_of_violations">Summary of violations</h3>
      <table id="violations-summary-stats-table" class="table table-striped">
        <caption>Violation count, by ruleset and severity.</caption>
        <thead class="thead-inverse">
          <tr>
            <th></th>
            <th scope="col">Critical</th>
            <th scope="col">Serious</th>
            <th scope="col">Moderate</th>
            <th scope="col">Minor</th>
            <th scope="col">Total</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <th scope="row">WCAG 2.0 A</th>
            <td>0</td><td>0</td><td>0</td><td>0</td><td>0</td>
          </tr>
          <tr>
            <th scope="row">WCAG 2.0 AA</th>
            <td>0</td><td>0</td><td>0</td><td>0</td><td>0</td>
          </tr>
          <tr>
            <th scope="row">EPUB</th>
            <td>0</td><td>0</td><td>0</td><td>0</td><td>0</td>
          </tr>
          <tr>
            <th scope="row">Best Practice</th>
            <td>0</td><td>0</td><td>0</td><td>1</td><td>1</td>
          </tr>
          <tr>
            <th scope="row">Other</th>
            <td>0</td><td>0</td><td>0</td><td>0</td><td>0</td>
          </tr>
          <tr>
            <th scope="row">Total</th>
            <td>0</td><td>0</td><td>0</td><td>1</td><td>1</td>
          </tr>
        </tbody>
      </table>

      <h3 id="all-violations">All violations</h3>

      <div id="filters" class="d-none py-4">
        <span class="filter-label">Impact</span>
        <select name="impact" aria-label="impact">
          <option value="all" selected>All</option>
          <option value='minor'>Minor</option>
        </select>
        <span class="filter-label">Ruleset</span>
        <select name="ruleset" aria-label="ruleset">
          <option value="all" selected>All</option>
          <option value='best-practice'>Best Practice</option>
        </select>
        <span class="filter-label">Rule</span>
        <select name="rule" aria-label="rule">
          <option value="all" selected>All</option>
          <option value='epub-type-has-matching-role'>epub-type-has-matching-role</option>
        </select>
        <span class="filter-label">File</span>
        <select name="file" aria-label="file">
          <option value="all" selected>All</option>
          <option value='table3.xhtml'>table3.xhtml</option>
        </select>
        <a href="#" onclick="resetFilters()" class="ml-4">Reset filters</a>
      </div>

      <table id="violations-table" class="table table-bordered">
        <caption>Violations in the EPUB, with references to severity, guidelines and specific location of problem.</caption>
        <thead class="thead-inverse">
          <tr>
            <th>Impact</th>
            <th>Ruleset</th>
            <th>Rule</th>
            <th>Location</th>
            <th>Details</th>
          </tr>
        </thead>
        <tbody>
          <tr>
        <td><span class='minor'>Minor</span></td>
        <td><span class='ruleset'>Best Practice</span></td>
        <td>epub-type-has-matching-role<br/><br/><span class='engine'>aXe</span></td>
        <td><em>"Table 3"</em><br/><br/><code class='location'>table3.xhtml#epubcfi(/4/2/6/4[dogalarm])</code><br/><br/><div class='snippet'>Snippet:<code>&lt;aside xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xmlns:epub=&quot;http://www.idpf.org/2007/ops&quot; epub:type=&quot;footnote&quot; id=&quot;dogalarm&quot;&gt;* Alarmed by passing dog.&lt;/aside&gt;</code></div></td><td class='details'>
        <ul><li>Element has no ARIA role matching its epub:type</li></ul>
        <p><a href='http://kb.daisy.org/publishing/docs/html/roles.html' target='_blank'>Learn more about: ARIA role</a></p>
        </td></tr>
        </tbody>
      </table>

      <p class="pagenav">Go to: <a href="#violations">Top of section</a> | <a href="#navlist">Page navigation</a></p>
    </div>

    <!-- METADATA TAB -->
    <div id="metadata" role="tabpanel">
      <h2>Metadata</h2>

      <p class="sectionnav">Go to: <a href="#all-metadata">All Metadata</a> | <a href="#a11y-metadata">Accessibility Metadata</a> </p>

      <h3 id="all-metadata">All Metadata</h3>
      <table id="metadata-table" class="table table-bordered">
        <caption>Publication metadata.</caption>
        <thead class="thead-inverse">
          <tr>
            <th>Name</th>
            <th>Value</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>dc:title</td>
            <td>Natural History of the Tulare Kangaroo Rat</td>
          </tr>
          <tr>
            <td>dc:description</td>
            <td>Journal of Mammalogy, Vol. 22, No. 2, pp. 117–148</td>
          </tr>
          <tr>
            <td>dc:type</td>
            <td>Natural History</td>
          </tr>
          <tr>
            <td>dc:language</td>
            <td>en-US</td>
          </tr>
          <tr>
            <td>dc:publisher</td>
            <td>Pipfrosch Press</td>
          </tr>
          <tr>
            <td>dc:date</td>
            <td>2020-03-31</td>
          </tr>
          <tr>
            <td>dc:creator</td>
            <td>Donald T. Tappe</td>
          </tr>
          <tr>
            <td>dc:identifier</td>
            <td>9ffee631-54e2-4a7b-824e-af1a8d18ac20</td>
          </tr>
          <tr>
            <td>schema:accessibilitySummary</td>
            <td>This publication attempts to conform to WCAG 2.0 Level AA. Validation by an accessibility expert has not yet been done.</td>
          </tr>
          <tr>
            <td>schema:accessMode</td>
            <td>textual,visual</td>
          </tr>
          <tr>
            <td>schema:accessModeSufficient</td>
            <td>textual,visual,textual</td>
          </tr>
          <tr>
            <td>schema:accessibilityFeature</td>
            <td>structuralNavigation</td>
          </tr>
          <tr>
            <td>schema:accessibilityHazard</td>
            <td>noFlashingHazard,noSoundHazard,noMotionSimulationHazard</td>
          </tr>
          <tr>
            <td>dcterms:modified</td>
            <td>2020-03-16T22:31:06Z</td>
          </tr>
          
        </tbody>
      </table>

      <h3 id="a11y-metadata">Accessibility Metadata</h3>

        <p>The following accessibility metadata is present:
          <span class="metadata-name">schema:accessMode</span>
          <span class="metadata-name">schema:accessibilityFeature</span>
          <span class="metadata-name">schema:accessibilityHazard</span>
          <span class="metadata-name">schema:accessibilitySummary</span>
          <span class="metadata-name">schema:accessModeSufficient</span>
        </p>

        <p>The following accessibility metadata is missing:
          <span class="metadata-name">schema:accessibilityAPI</span>
          <span class="metadata-name">schema:accessibilityControl</span>
          <span class="metadata-name">a11y:certifiedBy</span>
          <span class="metadata-name">dcterms:conformsTo</span>
        .
        </p>
      <p class="pagenav">Go to: <a href="#metadata">Top of section</a> | <a href="#navlist">Page navigation</a></p>
    </div>

    <!-- OUTLINES TAB -->
    <div id="outlines" role="tabpanel">
      <h2>Outlines</h2>
      <p class="sectionnav">Go to: <a href="#toc-outline">TOC Outline</a> | <a href="#headings-outline">Headings Outline</a> | <a href="#html-outline">HTML Outline</a> </p>

      <div class="row">

        <div class="col-sm" id="toc-outline">
          <h3>TOC Outline</h3>
          <ol xmlns="http://www.w3.org/1999/xhtml">
  <li>Article Table of Contents</li>
  <li>Introduction</li>
  <li>Methods and Acknowledgements</li>
  <li>Burrow Systems</li>
  <li>Food and Storage</li>
  <li>Economic Importance</li>
  <li>Water Requirements</li>
  <li>Activities</li>

  <li>Literature Cited</li>
  <li>ePub Notes</li>
</ol>
        </div>

        <div class="col-sm" id="headings-outline">
          <h3>Headings Outline</h3>
          <ul><li><span class="toc-h1">Contents</span><ul><li><span class="toc-h2">Table of Contents</span><li><span class="toc-h2">List of Figures and Plates</span><li><span class="toc-h2">List of Tables</span><li><span class="toc-h2">Journal Issue Page Number References</span></li></ul></li><li><span class="toc-h1">Introduction</span><li><span class="toc-h1">Methods and Acknowledgements</span><li><span class="toc-h1">Burrow Systems</span><li><span class="toc-h1">Food and Storage</span><li><span class="toc-h1">Economic Importance</span><li><span class="toc-h1">Water Requirements</span><li><span class="toc-h1">Activities</span><li><span class="toc-h1">Plate 1</span><li><span class="toc-h1">Table 1</span><li><span class="toc-h1">Table 2</span><li><span class="toc-h1">Table 3</span><ul><li><span class="toc-h2">Table 3 Description</span></li></ul></li><li><span class="toc-h1">Table 4</span><li><span class="toc-h1">Table 5</span><ul><li><span class="toc-h2">Table 5 Description</span></li></ul></li><li><span class="toc-h1">Plate 2</span><li><span class="toc-h1">Figure 4</span><li><span class="toc-h1">Literature Cited</span><li><span class="toc-h1">ePub Notes</span><ul><li><span class="toc-h2">Contents:</span><li><span class="toc-h2">Original Article</span><li><span class="toc-h2">Alterations</span><li><span class="toc-h2">Motivation</span><li><span class="toc-h2">To Do List</span><li><span class="toc-h2">Copyright Status</span><li><span class="toc-h2">Donations</span></li></ul></li></ul>
        </div>

        <div class="col-sm" id="html-outline">
          <h3>HTML Outline</h3>
          <ol><li><ol><li>Contents<ol><li>Table of Contents</li><li>List of Figures and Plates</li><li>List of Tables</li><li>Journal Issue Page Number References</li></ol></li></ol></li><li><ol><li><i>Untitled BODY</i><ol><li>Introduction</li></ol></li></ol></li><li><ol><li><i>Untitled BODY</i><ol><li>Methods and Acknowledgements</li></ol></li></ol></li><li><ol><li><i>Untitled BODY</i><ol><li>Burrow Systems<ol><li><i>Untitled SECTION</i></li><li><i>Untitled SECTION</i></li><li><i>Untitled SECTION</i></li><li><i>Untitled SECTION</i></li></ol></li></ol></li></ol></li><li><ol><li><i>Untitled BODY</i><ol><li>Food and Storage</li></ol></li></ol></li><li><ol><li><i>Untitled BODY</i><ol><li>Economic Importance</li></ol></li></ol></li><li><ol><li><i>Untitled BODY</i><ol><li>Water Requirements</li></ol></li></ol></li><li><ol><li><i>Untitled BODY</i><ol><li>Activities<ol><li><i>Untitled SECTION</i></li><li><i>Untitled SECTION</i></li><li><i>Untitled SECTION</i></li><li><i>Untitled SECTION</i></li></ol></li></ol></li></ol></li><li><ol><li><i>Untitled BODY</i><ol><li>Plate 1</li></ol></li></ol></li><li><ol><li><i>Untitled BODY</i><ol><li>Table 1</li></ol></li></ol></li><li><ol><li><i>Untitled BODY</i><ol><li>Table 2</li></ol></li></ol></li><li><ol><li><i>Untitled BODY</i><ol><li>Table 3<ol><li>Table 3 Description</li></ol></li></ol></li></ol></li><li><ol><li><i>Untitled BODY</i><ol><li>Table 4</li></ol></li></ol></li><li><ol><li><i>Untitled BODY</i><ol><li>Table 5<ol><li>Table 5 Description</li></ol></li></ol></li></ol></li><li><ol><li><i>Untitled BODY</i><ol><li>Plate 2</li></ol></li></ol></li><li><ol><li><i>Untitled BODY</i><ol><li>Figure 4</li></ol></li></ol></li><li><ol><li><i>Untitled BODY</i><ol><li>Literature Cited</li></ol></li></ol></li><li><ol><li><i>Untitled BODY</i><ol><li>ePub Notes<ol><li>Contents:</li><li>Original Article</li><li>Alterations</li><li>Motivation</li><li>To Do List</li><li>Copyright Status</li><li>Donations</li></ol></li></ol></li></ol></li></ol>
      </div>
    </div>
    <p class="pagenav">Go to: <a href="#outlines">Top of section</a> | <a href="#navlist">Page navigation</a></p>
  </div>

  <!-- IMAGES TAB -->
  <div id="images" role="tabpanel">
      <h2>Images</h2>
        <table  id="image-table" class="table table-striped table-bordered">
          <caption>Images in the EPUB, with their description</caption>
          <thead class="thead-inverse">
             <tr>
                <th>Image</th>
                <th><code>alt</code>
                </th>
                <th><code>aria-describedby</code>
                </th>
                <th><code>figcaption</code></th>
                <th>Location</th>
                <th>Role</th>
             </tr>
          </thead>
          <tbody>
                <tr>
                  <td class="image">
                    <a href="data/EPUB/plates/plate1a.jpg">
                      <img src = "data/EPUB/plates/plate1a.jpg"/>
                    </a>
                  </td>

                    <td class="missing">N/A</td>

                    <td class="missing">N/A</td>

                    <td>Plate 1a. Burrow of tularensis; Note that there is no large mound of earth.</td>

                  <td class="location">plate1.xhtml#epubcfi(/4/2[plate1]/6[a]/2)</td>

                    <td class="missing">N/A</td>
                </tr>
                <tr>
                  <td class="image">
                    <a href="data/EPUB/plates/plate1b.jpg">
                      <img src = "data/EPUB/plates/plate1b.jpg"/>
                    </a>
                  </td>

                    <td class="missing">N/A</td>

                    <td class="missing">N/A</td>

                    <td>Plate 1b. Mound of earth, larger than average, thrown from a main entrance to a burrow. Note the rodent’s tracks in the loose earth. (Ruler shown is one foot long.)</td>

                  <td class="location">plate1.xhtml#epubcfi(/4/2[plate1]/8[b]/2)</td>

                    <td class="missing">N/A</td>
                </tr>
                <tr>
                  <td class="image">
                    <a href="data/EPUB/plates/plate1c.jpg">
                      <img src = "data/EPUB/plates/plate1c.jpg"/>
                    </a>
                  </td>

                    <td class="missing">N/A</td>

                    <td class="missing">N/A</td>

                    <td>Plate 1c. Mound of earth at entrance to a burrow of tularensis beside a rock.</td>

                  <td class="location">plate1.xhtml#epubcfi(/4/2[plate1]/10[c]/2)</td>

                    <td class="missing">N/A</td>
                </tr>
                <tr>
                  <td class="image">
                    <a href="data/EPUB/plates/plate1d.jpg">
                      <img src = "data/EPUB/plates/plate1d.jpg"/>
                    </a>
                  </td>

                    <td class="missing">N/A</td>

                    <td class="missing">N/A</td>

                    <td>Plate 1d. Surface runways radiating from a subsidiary burrow of tularensis.</td>

                  <td class="location">plate1.xhtml#epubcfi(/4/2[plate1]/12[d]/2)</td>

                    <td class="missing">N/A</td>
                </tr>
                <tr>
                  <td class="image">
                    <a href="data/EPUB/plates/plate1e.jpg">
                      <img src = "data/EPUB/plates/plate1e.jpg"/>
                    </a>
                  </td>

                    <td class="missing">N/A</td>

                    <td class="missing">N/A</td>

                    <td>Plate 1e. Habitat of Dipodomys ingens and Dipodomys heermanni tularensis. Dipodomys ingens occupies the level area in the foreground and tularensis the hillsides in the background, the line of demarcation between the habitats of the two species being just below the rocky area near the base of the hills.</td>

                  <td class="location">plate1.xhtml#epubcfi(/4/2[plate1]/14[e]/2)</td>

                    <td class="missing">N/A</td>
                </tr>
                <tr>
                  <td class="image">
                    <a href="data/EPUB/plates/plate1f.jpg">
                      <img src = "data/EPUB/plates/plate1f.jpg"/>
                    </a>
                  </td>

                    <td class="missing">N/A</td>

                    <td class="missing">N/A</td>

                    <td>Plate 1f. A store of seed of Bromus rubens in the blind end of a branch of a main tunnel.</td>

                  <td class="location">plate1.xhtml#epubcfi(/4/2[plate1]/16[f]/2)</td>

                    <td class="missing">N/A</td>
                </tr>
                <tr>
                  <td class="image">
                    <a href="data/EPUB/plates/plate1g.jpg">
                      <img src = "data/EPUB/plates/plate1g.jpg"/>
                    </a>
                  </td>

                    <td class="missing">N/A</td>

                    <td class="missing">N/A</td>

                    <td>Plate 1g. Heads of wheat cut by tularensis. Note that a head in the lower center has been thrashed. Photograph by Joseph S. Dixon.</td>

                  <td class="location">plate1.xhtml#epubcfi(/4/2[plate1]/18[g]/2)</td>

                    <td class="missing">N/A</td>
                </tr>
                <tr>
                  <td class="image">
                    <a href="data/EPUB/plates/plate1h.jpg">
                      <img src = "data/EPUB/plates/plate1h.jpg"/>
                    </a>
                  </td>

                    <td class="missing">N/A</td>

                    <td class="missing">N/A</td>

                    <td>Plate 1h. A much used dust bowl. Note the tail mark in the loose earth. (Ruler shown is six inches long.)</td>

                  <td class="location">plate1.xhtml#epubcfi(/4/2[plate1]/20[h]/2)</td>

                    <td class="missing">N/A</td>
                </tr>
                <tr>
                  <td class="image">
                    <a href="data/EPUB/plates/plate2a.jpg">
                      <img src = "data/EPUB/plates/plate2a.jpg"/>
                    </a>
                  </td>

                    <td>Four newborn Tulare Kangaroo Rat pups. The eyes are closed, the ears are just bumps, the tail is about a third the length of the body.</td>

                    <td class="missing">N/A</td>

                    <td>Plate 2a. A liter of tularensis one hour after birth; × ½.</td>

                  <td class="location">plate2.xhtml#epubcfi(/4/2[plate2]/6[a]/2)</td>

                    <td class="missing">N/A</td>
                </tr>
                <tr>
                  <td class="image">
                    <a href="data/EPUB/plates/plate2b.jpg">
                      <img src = "data/EPUB/plates/plate2b.jpg"/>
                    </a>
                  </td>

                    <td>A four day old Tulare Kangaroo Rat pup resting on its stomach. The front paws are stretched to in front of the nose, the ears are developing, and the large rear feet are noticeable. The tail is tucked under the body.</td>

                    <td class="missing">N/A</td>

                    <td>Plate 2b. Age four days; × 1.</td>

                  <td class="location">plate2.xhtml#epubcfi(/4/2[plate2]/8[b]/2)</td>

                    <td class="missing">N/A</td>
                </tr>
                <tr>
                  <td class="image">
                    <a href="data/EPUB/plates/plate2c.jpg">
                      <img src = "data/EPUB/plates/plate2c.jpg"/>
                    </a>
                  </td>

                    <td>An eight day old Tulare Kangaroo Rat pup resting on its stomach. The dark fur is short but very noticeable. The ears are developing but still appear proportionally small relative to adults. The tail still appears short for the species, but the hind foot shown is very large, almost reaching to the elbow of the front arm.</td>

                    <td class="missing">N/A</td>

                    <td>Plate 2c. Age eight days; × 1.</td>

                  <td class="location">plate2.xhtml#epubcfi(/4/2[plate2]/10[c]/2)</td>

                    <td class="missing">N/A</td>
                </tr>
                <tr>
                  <td class="image">
                    <a href="data/EPUB/plates/plate2d.jpg">
                      <img src = "data/EPUB/plates/plate2d.jpg"/>
                    </a>
                  </td>

                    <td>A twelve day old Tulare Kangaroo Rat pup resting on its stomach. The ears still do not appear fully developed. The tail is stretched behind the rat out of the picture frame. Distinct toes on the wide rear foot are very visible.</td>

                    <td class="missing">N/A</td>

                    <td>Plate 2d. Age 12 days; × ¾.</td>

                  <td class="location">plate2.xhtml#epubcfi(/4/2[plate2]/12[d]/2)</td>

                    <td class="missing">N/A</td>
                </tr>
                <tr>
                  <td class="image">
                    <a href="data/EPUB/plates/plate2e.jpg">
                      <img src = "data/EPUB/plates/plate2e.jpg"/>
                    </a>
                  </td>

                    <td>A 16 day old Tulare Kangaroo Rat pup crouched on all fours. The long hind leg and large foot are very apparent, the ears look like they have properly developed, the tail is longer than the length of the body, the wiskers are very visible.</td>

                    <td class="missing">N/A</td>

                    <td>Plate 2e. Age 16 days; × ½.</td>

                  <td class="location">plate2.xhtml#epubcfi(/4/2[plate2]/14[e]/2)</td>

                    <td class="missing">N/A</td>
                </tr>
                <tr>
                  <td class="image">
                    <a href="data/EPUB/plates/plate2f.jpg">
                      <img src = "data/EPUB/plates/plate2f.jpg"/>
                    </a>
                  </td>

                    <td>A 20 day old Tulare Kangaroo Rat pup standing on its hind legs but leaning forward. The shortness of the front arms relative to the rear legs is quite apparent. The tail is stretched behind the rat extends beyond the image frame.</td>

                    <td class="missing">N/A</td>

                    <td>Plate 2f. Age 20 days; × ½.</td>

                  <td class="location">plate2.xhtml#epubcfi(/4/2[plate2]/16[f]/2)</td>

                    <td class="missing">N/A</td>
                </tr>
                <tr>
                  <td class="image">
                    <a href="data/EPUB/plates/plate2g.jpg">
                      <img src = "data/EPUB/plates/plate2g.jpg"/>
                    </a>
                  </td>

                    <td>A 56 day old juvenile Kangaroo Rat pup. The quality of the image is poor but it appears it is standing on all fours rather than just the hind feet. The tail is behind the rat and in the full image frame, it is quite long, appearing to be just over twice the body length. There is an obvious fray of fur at the end of the tail.</td>

                    <td class="missing">N/A</td>

                    <td>Plate 2g. Age 56 days; × ¼.</td>

                  <td class="location">plate2.xhtml#epubcfi(/4/2[plate2]/18[g]/2)</td>

                    <td class="missing">N/A</td>
                </tr>
                <tr>
                  <td class="image">
                    <a href="data/EPUB/plates/plate2h.jpg">
                      <img src = "data/EPUB/plates/plate2h.jpg"/>
                    </a>
                  </td>

                    <td>A mother Tulare Kangaroo Rat carrying one pup with a second pup in front of her. She is standing on her hind legs with the pup in her mouth, it appears she is using one of her front paws to help support the pup.</td>

                    <td class="missing">N/A</td>

                    <td>Plate 2h. Mother kangaroo rat carrying her young</td>

                  <td class="location">plate2.xhtml#epubcfi(/4/2[plate2]/20[h]/2)</td>

                    <td class="missing">N/A</td>
                </tr>
                <tr>
                  <td class="image">
                    <a href="data/EPUB/plates/plate2i.jpg">
                      <img src = "data/EPUB/plates/plate2i.jpg"/>
                    </a>
                  </td>

                    <td>Close-up of the mother with a pup in her mouth. One of the pup’s front paws is on the ground.</td>

                    <td class="missing">N/A</td>

                    <td>Plate 2i. Mother kangaroo rat carrying her young</td>

                  <td class="location">plate2.xhtml#epubcfi(/4/2[plate2]/22[i]/2)</td>

                    <td class="missing">N/A</td>
                </tr>
                <tr>
                  <td class="image">
                    <a href="data/EPUB/plates/plate2j.jpg">
                      <img src = "data/EPUB/plates/plate2j.jpg"/>
                    </a>
                  </td>

                    <td class="missing">N/A</td>

                    <td class="missing">N/A</td>

                    <td>Plate 2j. Kangaroo rat suckling her eleven-day old young; note that the young are lying on their backs. Photographed from below through a glass plate.</td>

                  <td class="location">plate2.xhtml#epubcfi(/4/2[plate2]/24[j]/2)</td>

                    <td class="missing">N/A</td>
                </tr>
          </tbody>
        </table>
      <p class="pagenav">Go to: <a href="#images">Top of section</a> | <a href="#navlist">Page navigation</a></p>
    </div>

  </div> <!-- end div for tabs' contents -->


  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js" integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ" crossorigin="anonymous"></script>
  <script type="text/javascript" src="https://cdn.datatables.net/1.10.15/js/jquery.dataTables.min.js"></script>
  <script type="text/javascript" src="https://cdn.datatables.net/1.10.15/js/dataTables.bootstrap4.min.js"></script>

  <script type="text/javascript">

    // https://datatables.net/reference/option/language
    // https://datatables.net/examples/basic_init/language.html
    // https://datatables.net/manual/i18n
    const dataTableInit = {
        "language": {
            "decimal":        "",
            "emptyTable":     'No data available in table',
            "info":           'Showing: _START_ - _END_ / _TOTAL_',
            "infoEmpty":      'Showing: 0 - 0 / 0',
            "infoFiltered":   '(filtered from _MAX_ total entries)',
            "infoPostFix":    "",
            "thousands":      ",",
            "lengthMenu":     'Display _MENU_ records per page',
            "loadingRecords": 'Loading...',
            "processing":     'Processing...',
            "search":         'Search:',
            "zeroRecords":    'No matching records found',
            "paginate": {
                "first":      'First',
                "last":       'Last',
                "next":       'Next',
                "previous":   'Previous'
            },
            "aria": {
                "sortAscending":  ': activate to sort column ascending',
                "sortDescending": ': activate to sort column descending'
            }
        }
    };

  // keep a flat list of the violations in memory for table filtering
  var violations = [{"file":"table3.xhtml","fileTitle":"Table 3","engine":"aXe","kburl":"http://kb.daisy.org/publishing/docs/html/roles.html","kbtitle":"ARIA role","rule":"epub-type-has-matching-role","desc":"Element has no ARIA role matching its epub:type","pointer":{"cfi":["/4/2/6/4[dogalarm]"],"css":["#dogalarm"]},"impact":"minor","location":"table3.xhtml#epubcfi(/4/2/6/4[dogalarm])","rulesetTags":["best-practice"],"applicableRulesetTag":"best-practice","html":"&lt;aside xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xmlns:epub=&quot;http://www.idpf.org/2007/ops&quot; epub:type=&quot;footnote&quot; id=&quot;dogalarm&quot;&gt;* Alarmed by passing dog.&lt;/aside&gt;"}];

  // update the contents of the table to reflec the filtering
  function updateTableContents(violationSubset) {
    // anything else is 'other'
    var rulesetTagLabels = {
      'wcag2a': 'WCAG 2.0 A',
      'wcag2aa': 'WCAG 2.0 AA',
      'EPUB': 'EPUB',
      'best-practice': 'Best Practice',
      'other': 'Other'
    };

    $('#violations-table').dataTable().fnDestroy();
    $("#message").remove();
    if (violationSubset.length == 0) {
      $("<p id='message'>No matching violations found.</p>").insertBefore("#violations .pagenav");
      $("#violations-table").hide();
      return;
    }

    $("#violations-table").show();
    $("#filters").show();

    var tablebody = $("#violations-table > tbody");
    tablebody.empty();

    violationSubset.forEach(function(violation) {

      var tr = $("<tr></tr>");
      var tdImpact = $("<td><span class='" + violation["impact"] + "'>" + violation["impact"] + "</span></td>");
      var tdRuleset = $("<td><span class='ruleset'>" + rulesetTagLabels[violation["applicableRulesetTag"]] + "</span></td>");
      var tdLocation = $("<td><em>\"" + violation["fileTitle"] + "\"</em><br/><br/><code class='location'>" + violation["location"] + "</code></td>");
      if (violation.html) {
        var tdSnippet = $('<br/><br/><div class=\'snippet\'>Snippet: <code>'+ violation.html.trim() + "</code></div>");
        tdLocation.append(tdSnippet);
      }
      var tdRule = $("<td>" + violation["rule"] + "<br/><br/><span class='engine'>" + violation["engine"] + "</span></td>");

      var desc = violation["desc"];

      var detailsArr = desc.split("\n");
      var tdDetails = $("<td class='details'></td>");

      var ul = $("<ul></ul>");
      tdDetails.append(ul);
      detailsArr.forEach(function(item) {
        if (item != "") {
          var elm = $("<li></li>");
          elm.text(decodeEntities(item));
          ul.append(elm);
        }
      });
      var link = $("<p><a href='"
        + violation["kburl"]
        + '\' target=\'_blank\'>Learn more about: ' + violation["kbtitle"] + "</a></p>");
      tdDetails.append(link);

      tr.append(tdImpact);
      tr.append(tdRuleset);
      tr.append(tdRule);
      tr.append(tdLocation);
      tr.append(tdDetails);
      tablebody.append(tr);
    });

    $('#violations-table').DataTable(dataTableInit);
  }

  function filterSelected() {
    var filters = [];
    $("#filters select").each(function(idx, elm) {
      $(elm).children("option").each(function (idx, optElm) {
        if (optElm.selected) {
          filters[elm.name] = optElm.value;
        }
      });
    });
    var filteredData = filterViolations(filters);
    updateTableContents(filteredData, true);
  }

  // expects:
  // {"rule": "all", "impact": "serious", "file": "p1.xhtml"}
  function filterViolations(filters) {
    var filteredList = [];
    violations.forEach(function(item) {
      if (
        (filters["rule"] == "all" || item["rule"] === filters["rule"])
        &&
        (filters["impact"] == "all" || item["impact"] === filters["impact"])
        &&
        (filters["file"] == "all" || item["file"] === filters["file"])
        &&
        (filters["ruleset"] == "all" || item["applicableRulesetTag"] === filters["ruleset"])
      )
      {
        filteredList.push(item);
      }
    });
    return filteredList;
  }

  function resetFilters() {
    $("#filters select").each(function(idx, elm) {
      $(elm).children("option").each(function (idx, optElm) {
        optElm.selected = optElm.value == "all";
      });
    });
    filterSelected();
  }

  function decodeEntities(text) {
    // The entities tend to appear in violation descriptions, and there are just a few named ones involved
    var namedEntities = {
      "&lt;": "<",
      "&gt;": ">",
      "&quot;": "\"",
      "&nbsp": " "
    };
    // process entities
    var str = text.replace(/&#(\d+);/g, function(match, dec) {
      return String.fromCharCode(dec);
		});

    //process named entities
    Object.keys(namedEntities).forEach(k => {
      str = str.replace(new RegExp(k, 'g'), namedEntities[k]);
    });
    return str;
  }

  // certain classes need to be added to elements if we're using javascript in the browser
  function prepareForJS() {
    $('#filters').removeClass('d-none');
    $('#navlist').addClass('nav-tabs nav');
    $('#violations').addClass('tab-pane active');
    $('#metadata').addClass('tab-pane');
    $('#outlines').addClass('tab-pane');
    $('#images').addClass('tab-pane');
  }
  $(document).ready(function() {
    prepareForJS();
    $('#metadata-table').DataTable(dataTableInit);
    //updateTableContents(violations, false);
    $('#violations-table').DataTable(dataTableInit);
    $('#filters > select').change(filterSelected);
  });

  </script>


</body>
</html>
